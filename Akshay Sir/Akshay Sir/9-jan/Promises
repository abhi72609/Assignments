// ! Promise
// Promise is an object in js which is used to handle asynchronous result(completion or failure) of an asynchronous operation
// Promise is like a placeholder for a value which might not be immediately available (the value which will come in future )
// whenever we make a http request to the server , server will return a promise as a response

// ! state of the promise
// !1. pending -> it is the initial state of the promise , Neither the promise is fulfilled nor it is rejected
// !2. fulfilled -> we have received the response successfully from the promise
// !3. rejected -> if the request has been rejected , due to some error on client side or server side

// ! methods to handle the promise
// 1. then -> then method is used to handle the fulfilled state of the promise
// 2. catch -> catch method is used to handle the rejected state of the promise
// 3. finally -> finally method will be executed in both the state , if promise is resolved or rejected

// // ! creating a promise
// let p1 = new Promise((res , rej)=>{
//     let random = Math.round(Math.random()*10)
//     console.log(random);
//     setTimeout(()=>{
//         if(random>4){
//          res([20 , 30 , 40])
//         }else{
//             rej('This is the error from server')
//         }
//     } , 5000)
// })
// console.log(p1);
// p1.then((data)=>{
//     console.log('Then method');
//     console.log(data);
// }).catch((err)=>{
//     console.log('Catch');
//     console.log(err);
// }).finally(()=>{
//     console.log('finally');
// })

// console.log('Bye');

// ! Promise chaining
// whenever we have to handle multiple promise one after another we can use promise chaining
// let p1 = new Promise((res , rej)=>{
//     let random = Math.round(Math.random()*10)
//     setTimeout(()=>{
//         if(random>4){
//          res([20 , 30 , 40])
//         }else{
//             rej('This is the error from server')
//         }
//     } , 5000)
// })
// p1.then((data)=>{
//     console.log(data);
//     return 10 // if we return something from then block , it will be returned as a promise , and we can handle that by next then block
// }).then((a)=>{
//   console.log(a);
//   return 20
// }).then((b)=>{
//     console.log(b);
// }).catch((err)=>{
//     console.log(err);
// })

// ! async await
// these are the keywords in js , they makes it easy to work with promise , it helps  us to handle the promise
// it is  used make it to make it more readable to work with promises

// ! async keyword
// async keyword is used before the function declaration
// async keyword is used to describe that the function contains some asynchronous code
// async function will always return a promise , if we return a non promise value it will wrap that in a promise and then return that

// ! await keyword
// await keyword is used to pause the execution of the function , until the promise is settled
// await can be used within the async function only
// it is used to consume the promise data

// async function fun(){
//     return 20;
// }
// console.log(fun());

let p1 = new Promise((res, rej) => {
  let random = Math.round(Math.random() * 10);
  setTimeout(() => {
    if (random > 4) {
      res([20, 30, 40]);
    } else {
      rej("This is the error from server");
    }
  }, 5000);
});

// async function getData() {
//   try{
//       let data = await p1;
//     console.log(data);
//   }catch(err){
//     console.log(err);
//   }
// }
// getData()

console.log("Hello");
async function fun() {
  console.log("Function started");
  let data = await p1;
  console.log(data);
  console.log("Function End");
}
fun();
console.log("After the function");
